<!DOCTYPE html>
<html lang="en" data-bs-theme="dark">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prompt Details</title>

    {% include calculate-variables.html %}
    
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">
    
    <!-- IndieAuth and WebMentions Metadata -->
    {% include indieauth-and-webmentions-metadata.html %}
    
    <!-- SEO Metadata -->
    {% include meta-data-seo.html %}
    
    <!-- PWA Header Includes -->
    {% include pwa-header-includes.html %}
    
    <!-- News Feed Meta Tags -->
    {% include feeds.html %}
    
    <!-- START OF CSS INCLUDE -->
    {% include all-css-includes.html %}
    <!-- END OF CSS INCLUDE -->
    
    <!-- Custom AI Provider Button Styles -->
    <style>
        .btn-send-chatgpt {
            background-color: #10a37f;
            border-color: #10a37f;
            color: white;
        }
        .btn-send-chatgpt:hover, .btn-send-chatgpt:focus {
            background-color: #0d8f6c;
            border-color: #0d8f6c;
            color: white;
        }
        
        .btn-send-claude {
            background-color: #575754;
            border-color: #575754;
            color: white;
        }
        .btn-send-claude:hover, .btn-send-claude:focus {
            background-color: #6E6E6B ;
            border-color: #6E6E6B;
            color: white;
        }
        
        .btn-send-gemini {
            background-color: #1f1f1f;
            border-color: #1f1f1f;
            color: white;
        }
        .btn-send-gemini:hover, .btn-send-gemini:focus {
            background-color: #0d0d0d;
            border-color: #0d0d0d;
            color: white;
        }
        
        .btn-send-microsoft {
            background-color: #00a1f1;
            border-color: #00a1f1;
            color: white;
        }
        .btn-send-microsoft:hover, .btn-send-microsoft:focus {
            background-color: #008ed0;
            border-color: #008ed0;
            color: white;
        }
        
        .btn-send-github {
            background-color: #08872B;
            border-color: #08872B;
            color: white;
        }
        .btn-send-github:hover, .btn-send-github:focus {
            background-color: #5FED83;
            border-color: #5FED83;
            color: white;
        }
        
        .ai-provider-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
        }
        
        .ai-provider-buttons .btn {
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 0.375rem 0.75rem;
            min-width: 2.5rem;
            height: 2.25rem;
        }
        
        .ai-provider-buttons .btn img {
            height: 1rem;
            width: auto;
            object-fit: contain;
            display: block;
            margin: auto;
        }
    </style>
    
    <!-- Scripts that need to be at the end of the header -->
    {% include scripts.html %}


</head>

<body style="scroll-padding-top: 70px;" data-bs-spy="scroll" data-bs-target="#navbarNavDarkDropdown"
    data-bs-offset="70">

    <!-- Navbar -->
    {% include top-nav-bar.html %}

    <main class="container my-4">
        <!-- Prompt Details Section -->
        <div class="card mb-4">
            <div class="card-body">
                <div class="d-flex justify-content-between align-items-center">
                    <h2 class="card-title">{{page.title}}</h2>
                    <div class="d-flex align-items-center">
                        <div class="like-container">
                            <button class="btn btn-outline-danger btn-sm btn-like" aria-label="Like this prompt">
                                <i class="fas fa-heart"></i> <span class="like-count">0</span>
                            </button>
                        </div>
                        <a href="data:text/plain;charset=utf-8,{% if page.prompt_content %}{{ page.prompt_content | strip_newlines | uri_escape }}{% else %}{{ page.content | strip_newlines | uri_escape }}{% endif %}" class="btn btn-primary ms-3"
                            download="{{ page.title | slugify }}.txt">
                            <i class="fas fa-download"></i>
                        </a>
                    </div>
                </div>
                <p class="card-text">{{page.description}}.</p>
                <div class="d-flex justify-content-between align-items-center">
                    <div>
                        {% for tag in page.tags %}
                            <span class="badge bg-primary"><i class="fas fa-tag"></i> {{ tag }}</span>
                        {% endfor %}
                    </div>
                </div>

                <div class="card my-3">
                    <div class="card-header justify-content-between d-flex align-items-center highlight-toolbar ps-3 pe-2 py-1 border-0 border-top border-bottom">
                        <span>Prompt</span>
                        <div class="d-flex gap-2">
                            <button class="btn btn-copy-prompt btn-sm mt-0 me-0" 
                                type="button" 
                                data-bs-original-title="Copy prompt to clipboard"
                                data-bs-toggle="tooltip" 
                                data-bs-placement="top"
                                aria-label="Copy prompt to clipboard">
                                <i class="fas fa-copy"></i> Copy Prompt
                            </button>
                            <div class="ai-provider-buttons">
                            <!-- OpenAI ChatGPT -->
                            {% assign openai_models = page.models-supported | where_exp: "model", "model contains 'gpt' or model contains '03' or model contains '04' or model contains 'o1'" %}
                            {% if openai_models.size > 0 %}
                            <button class="btn btn-send-chatgpt btn-sm mt-0 me-2 d-flex align-items-center" type="button" id="chatgptSendDefault" aria-label="Send prompt to ChatGPT">
                                <img src="/img/logos/OpenAI-Logo.svg" alt="OpenAI Logo">
                            </button>
                            {% endif %}

                            <!-- Anthropic Claude -->
                            {% assign anthropic_models = page.models-supported | where_exp: "model", "model contains 'claude'" %}
                            {% if anthropic_models.size > 0 %}
                            <button class="btn btn-send-claude btn-sm mt-0 me-2 d-flex align-items-center" type="button" id="claudeSendDefault" aria-label="Send prompt to Claude">
                                <img src="/img/logos/Claude-AI-Logo.svg" alt="Claude AI Logo">
                            </button>
                            {% endif %}

                            <!-- Google AI -->
                            {% assign google_models = page.models-supported | where_exp: "model", "model contains 'gemini'" %}
                            {% if google_models.size > 0 %}
                            <button class="btn btn-send-gemini btn-sm mt-0 me-2 d-flex align-items-center" type="button" id="geminiSendDefault" aria-label="Send prompt to Gemini">
                                <img src="/img/logos/Google-Gemini-Logo.svg" alt="Google Gemini Logo">
                            </button>
                            {% endif %}

                            <!-- Microsoft Copilot -->
                            {% assign microsoft_models = page.models-supported | where_exp: "model", "model contains 'copilot' or model contains 'microsoft'" %}
                            {% if microsoft_models.size > 0 %}
                            <button class="btn btn-send-microsoft btn-sm mt-0 me-2 d-flex align-items-center" type="button" id="microsoftSendDefault" aria-label="Send prompt to Microsoft Copilot">
                                <img src="/img/logos/Microsoft-Copilot-Logo.svg" alt="Microsoft Copilot Logo">
                            </button>
                            {% endif %}

                            <!-- GitHub Copilot -->
                            {% assign github_models = page.models-supported | where_exp: "model", "model contains 'github'" %}
                            {% if github_models.size > 0 %}
                            <button class="btn btn-send-github btn-sm mt-0 me-0 d-flex align-items-center" type="button" id="githubSendDefault" aria-label="Send prompt to GitHub Copilot">
                                <img src="/img/logos/GitHub-Copilot-Logo.svg" alt="GitHub Copilot Logo">
                            </button>
                            {% endif %}
                            </div> <!-- Close ai-provider-buttons -->
                        </div>
                    </div>
                    <div class="card-body p-1" markdown="0">
                        <pre class="bg-dark text-white rounded" style="white-space: pre-wrap; word-break: break-word;">
<code class="language-markdown">
{% if page.prompt_content %}{{ page.prompt_content | escape }}{% else %}{{ page.content | escape }}{% endif %}
</code>
                        </pre>
                    </div>
                </div>

                <div class="text-end mt-3">
                    <a href="data:text/plain;charset=utf-8,{% if page.prompt_content %}{{ page.prompt_content | strip_newlines | uri_escape }}{% else %}{{ page.content | strip_newlines | uri_escape }}{% endif %}" class="btn btn-primary ms-3"
                        download="{{ page.title | slugify }}.txt">
                        <i class="fas fa-download"></i>
                    </a>
                </div>
                <!-- Adjusted layout to align 'Prompts in this Series' header on the left and 'Rate this Prompt Series' with 'Download All Prompts in Series' on the right -->
                <hr class="my-4">
                <div class="mt-4">
                    <div class="d-flex justify-content-between align-items-center">
                        <h3 class="card-title">Prompts in this Series</h3>
                    </div>

                    <div class="d-flex">
                        <ol class="list-group list-group-numbered flex-grow-1 me-4">
                            <li class="list-group-item d-flex justify-content-between align-items-start">
                                <div class="ms-2 me-auto">
                                    <div class="fw-bold">Step 1: Introduction</div>
                                    A brief description of the first step in the series.
                                </div>
                                <span class="badge bg-primary rounded-pill">Step 1</span>
                            </li>
                            <li class="list-group-item d-flex justify-content-between align-items-start">
                                <div class="ms-2 me-auto">
                                    <div class="fw-bold">Step 2: Deep Dive</div>
                                    A brief description of the second step in the series.
                                </div>
                                <span class="badge bg-secondary rounded-pill">Step 2</span>
                            </li>
                            <li class="list-group-item d-flex justify-content-between align-items-start">
                                <div class="ms-2 me-auto">
                                    <div class="fw-bold">Step 3: Conclusion</div>
                                    A brief description of the final step in the series.
                                </div>
                                <span class="badge bg-success rounded-pill">Step 3</span>
                            </li>
                        </ol>
                    </div>
                </div>
            </div>
        </div>

        <!-- Related Prompts Section -->
        <div>
            <h3>Related Prompts</h3>
            <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4">
                <!-- 
                Dynamic Related Prompts based on tag overlap
                1. Get all prompt pages from site.pages
                2. Filter for pages with layout: prompt-details 
                3. Exclude current page
                4. Calculate tag overlap score for each
                5. Sort by overlap score descending
                6. Limit to top 9 results
                -->
                
                {% assign current_tags = page.tags | default: '' %}
                {% assign related_prompts = '' | split: '' %}

                <!-- Build array of related prompts with overlap scores -->
                {% for prompt_page in site.pages %}
                    {% if prompt_page.layout == 'prompt-details' and prompt_page.url != page.url %}
                        {% assign prompt_tags = prompt_page.tags | default: '' %}
                        <!--
                        
                        prompt_page.tags: {{ prompt_tags | join: ', ' }}
                        
                        -->
                        {% assign overlap_count = 0 %}

                        <!-- Calculate tag overlap -->
                        {% for current_tag in current_tags %}
                            {% if prompt_tags contains current_tag %}
                                {% assign overlap_count = overlap_count | plus: 1 %}
                                <!-- overlap_count: {{ overlap_count }} -->
                            {% endif %}
                        {% endfor %}
                        
                        <!-- Only include prompts with at least 1 overlapping tag -->
                        {% if overlap_count > 0 %}
                            {% assign prompt_with_score = prompt_page | append: '|' | append: overlap_count %}
                            {% assign related_prompts = related_prompts | push: prompt_with_score %}
                        {% endif %}
                    {% endif %}
                {% endfor %}


                <!-- Sort by overlap score (descending) and limit to 9 results -->
                {% assign sorted_prompts = related_prompts | sort | reverse %}
                {% assign max_prompts = 9 %}
                {% assign prompt_count = 0 %}
                
                {% for prompt_with_score in sorted_prompts %}
                    {% if prompt_count < max_prompts %}
                        {% assign prompt_data = prompt_with_score | split: '|' %}
                        {% assign prompt = prompt_data[0] %}
                        {% assign overlap_score = prompt_data[1] %}
                        
                        <div class="col">
                            <div class="card h-100">
                                <div class="card-body">
                                    <a href="{{ prompt.url | relative_url }}" class="text-decoration-none text-reset">
                                        <h5 class="card-title">{{ prompt.title | default: "Untitled Prompt" }}</h5>
                                    </a>
                                    <p class="card-text">{{ prompt.description | default: prompt.excerpt | strip_html | truncate: 120 }}</p>
                                    {% if prompt.tags and prompt.tags.size > 0 %}
                                        <div class="mt-2">
                                            {% for tag in prompt.tags limit: 3 %}
                                                <span class="badge bg-secondary me-1">{{ tag }}</span>
                                            {% endfor %}
                                        </div>
                                    {% endif %}
                                </div>
                            </div>
                        </div>
                        
                        {% assign prompt_count = prompt_count | plus: 1 %}
                    {% endif %}
                {% endfor %}
                
                <!-- If no related prompts found with tag overlap, show fallback message --->
                {% if prompt_count == 0 %}
                    <div class="col-12">
                        <div class="alert alert-info" role="alert">
                            <h5 class="alert-heading">No Related Prompts Found</h5>
                            <p class="mb-0">We couldn't find any prompts with overlapping tags. <a href="https://tedt.org/category/Prompts/" class="alert-link">Browse all prompts</a> to discover more.</p>
                        </div>
                    </div>
                {% endif %}
            </div>
        </div>
    </main>

    <!-- Footer -->
    {% include footer.html %}

    <!-- Bootstrap core JavaScript -->
    {% include js-bottom-of-body.html %}


    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Like button functionality
        document.querySelectorAll('.btn-like').forEach(btn => {
            btn.addEventListener('click', function(e) {
                e.stopPropagation();
                const countSpan = this.querySelector('.like-count');
                let count = parseInt(countSpan.textContent, 10);
                if (!this.classList.contains('liked')) {
                    count++;
                    this.classList.add('liked');
                    this.querySelector('i').classList.add('text-danger');
                } else {
                    count--;
                    this.classList.remove('liked');
                    this.querySelector('i').classList.remove('text-danger');
                }
                countSpan.textContent = count;
            });
        });

        // Copy button for Prompt Example
        document.querySelectorAll('.card-header .btn-copy-prompt').forEach(btn => {
            btn.addEventListener('click', function() {
                const pre = this.closest('.card').querySelector('pre');
                if (pre) {
                    navigator.clipboard.writeText(pre.innerText);
                    const original = this.innerHTML;
                    this.innerHTML = '<i class="fas fa-check"></i> Copied!';
                    setTimeout(() => {
                        this.innerHTML = original;
                    }, 1500);
                }
            });
        });

        // Initialize functionality
        document.addEventListener('DOMContentLoaded', function() {
            // Helper function to get prompt content
            function getPromptContent() {
                const pre = document.querySelector('pre code');
                return pre ? pre.innerText : '';
            }

            // OpenAI ChatGPT button handler
            var chatgptBtn = document.getElementById('chatgptSendDefault');
            if (chatgptBtn) {
                chatgptBtn.addEventListener('click', function(e) {
                    e.preventDefault();
                    var defaultModel = "gpt-4"; // Default fallback
                    var promptTitle = encodeURIComponent("{{ page.title }}");
                    var promptContent = encodeURIComponent(getPromptContent());
                    var url = `https://chat.openai.com/?model=${defaultModel}&q=${promptTitle}%0A%0A${promptContent}`;
                    window.open(url, '_blank', 'noopener');
                });
            }

            // Anthropic Claude button handler
            var claudeBtn = document.getElementById('claudeSendDefault');
            if (claudeBtn) {
                claudeBtn.addEventListener('click', function(e) {
                    e.preventDefault();
                    var promptTitle = "{{ page.title | escape }}";
                    var promptContent = getPromptContent();
                    var fullPrompt = promptTitle + "\n\n" + promptContent;
                    
                    // Copy to clipboard and show instruction
                    navigator.clipboard.writeText(fullPrompt).then(function() {
                        alert('Prompt copied to clipboard! Please paste it into Claude.ai');
                        window.open('https://claude.ai/', '_blank', 'noopener');
                    });
                });
            }

            // Google Gemini button handler
            var geminiBtn = document.getElementById('geminiSendDefault');
            if (geminiBtn) {
                geminiBtn.addEventListener('click', function(e) {
                    e.preventDefault();
                    var promptTitle = "{{ page.title | escape }}";
                    var promptContent = getPromptContent();
                    var fullPrompt = promptTitle + "\n\n" + promptContent;
                    
                    // Copy to clipboard and show instruction
                    navigator.clipboard.writeText(fullPrompt).then(function() {
                        alert('Prompt copied to clipboard! Please paste it into Gemini');
                        window.open('https://gemini.google.com/', '_blank', 'noopener');
                    });
                });
            }

            // Microsoft Copilot button handler
            var microsoftBtn = document.getElementById('microsoftSendDefault');
            if (microsoftBtn) {
                microsoftBtn.addEventListener('click', function(e) {
                    e.preventDefault();
                    var promptTitle = "{{ page.title | escape }}";
                    var promptContent = getPromptContent();
                    var fullPrompt = promptTitle + "\n\n" + promptContent;
                    
                    // Copy to clipboard and show instruction
                    navigator.clipboard.writeText(fullPrompt).then(function() {
                        alert('Prompt copied to clipboard! Please paste it into Microsoft Copilot');
                        window.open('https://copilot.microsoft.com/', '_blank', 'noopener');
                    });
                });
            }

            // GitHub Copilot button handler
            var githubBtn = document.getElementById('githubSendDefault');
            if (githubBtn) {
                githubBtn.addEventListener('click', function(e) {
                    e.preventDefault();
                    var promptTitle = "{{ page.title | escape }}";
                    var promptContent = getPromptContent();
                    var fullPrompt = promptTitle + "\n\n" + promptContent;
                    
                    // Copy to clipboard and show instruction
                    navigator.clipboard.writeText(fullPrompt).then(function() {
                        alert('Prompt copied to clipboard! Please paste it into your IDE with GitHub Copilot');
                        window.open('https://github.com/features/copilot', '_blank', 'noopener');
                    });
                });
            }
        });
    </script>
</body>

</html>