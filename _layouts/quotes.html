<!DOCTYPE html>
<html lang="en" data-bs-theme="dark">
  <head>
    <meta charset="utf-8">

    {% include utility/calculate-variables.html %}

    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">

    <!-- IndieAuth and WebMentions Metadata -->
    {% include seo/indieauth-webmentions-metadata.html %}

    <!-- SEO Metadata -->
    {% include seo/meta-data-seo.html %}

    <!-- PWA Header Includes -->
    {% include pwa/pwa-header-includes.html %}

    <!-- News Feed Meta Tags. -->
    {% include feeds/feeds.html %}

    <!-- START OF CSS INCLUDE -->

    {% include assets/all-css-includes.html %}
    <!-- WCAG contrast utility styles -->
    <link rel="stylesheet" href="/css/WCAG.css">

    <!-- END OF CSS INCLUDE -->

    <!-- Scripts that need to be at the end of the header -->
    {% include assets/scripts.html %}
  </head>

    <body>
        <a href="#main_content" class="visually-hidden-focusable position-absolute top-0 start-0 m-2 px-3 py-2 bg-dark text-white rounded" style="z-index:1000;">Skip to content</a>
    <!-- Legacy Browser Redirect & Google Tag Manager -->
    {% include layout/top-of-body.html %}

    {% include layout/top-nav-bar.html %}

    <!-- Page Content -->
    <div class="container">
        <div class="row">
            <!-- Blog Post Content Column -->
            <div class="col-lg-8">
                <!-- Blog Post -->
                <main class="h-entry" role="main">
                    <!-- Title -->
                    <!-- First get the first 7 words of the Content -->

                    {% assign plainText = page.content | strip_html | strip_newlines %}
                    {% assign stringWithoutCommas = plainText | replace: ',', '' %}
                    {% assign wordstoconvert = stringWithoutCommas | split: ' ' %}
                    {% assign first_7_words = wordstoconvert | slice: 0, 7 %}

                    <!-- Calculate Title Case per NYT -->

                    {% assign lowercaseWords = "a,an,the,and,but,or,nor,for,so,yet,at,by,in,of,on,to,up,about,across,after,along,amid,around,as,before,behind,below,beside,between,beyond,during,except,from,inside,into,like,near,off,on,onto,out,outside,over,past,through,throughout,till,toward,under,underneath,until,unto,upon,with,within,without" | split: ',' %}

                    {% assign words = first_7_words | downcase | split: ' ' %}
                    {% assign WordsInTitle = first_7_words | downcase | split: ' ' %}

                    
                    {% for word in words %}
                        {% assign titleCaseWord = word | capitalize %}

                        {% if lowercaseWords contains word %}
                            {% assign titleCaseWord = word %}
                        {% endif %}

                        {% if forloop.first == true %}
                            {% assign titleCaseWord = word | capitalize %}
                        {% endif %}

                        {% if forloop.last == true %}
                            {% assign titleCaseWord = word | capitalize %}
                        {% endif %}

                        {% assign WordsInTitle[forloop.index0] = titleCaseWord %}
                    {% endfor %}

                    {% assign titleCaseString = WordsInTitle | join: ' ' %}


                    <hr>
                    {% include content/publish-and-update-date-time-v2.html %}
                    <i class="fa fa-th-large" aria-hidden="true"></i>&nbsp;Catagories:
                    {% assign categories = page.categories %}
                    {% for category in categories %}<span class="p-category">
                        {% capture thiscategory %}{{ category | strip }}{% endcapture %}
                        {% if forloop.length == 1 %}
                            {{thiscategory}}
                        {% elsif forloop.last and forloop.length == 2 %}
                            and {{thiscategory}}
                        {% elsif forloop.last %}
                            and {{thiscategory}}
                        {% else %}
                            {{thiscategory}}, 
                        {% endif %}
                        {% if thiscategory == "draft" or thiscategory == "Draft" %}
                            {% assign this_is_a_draft = true %}
                        {% endif %}</span>
                    {% endfor %}</br>
                    <hr>

                                        {% assign __primary_category = page.categories | first %}
                                        {% if __primary_category %}
                                            {% capture __slug %}{% include utility/map-category-to-registry.html key=__primary_category %}{% endcapture %}
                                            {% assign __slug = __slug | strip %}
                                            {% if __slug == '' %}{% assign __slug = __primary_category | slugify %}{% endif %}
                                            {% assign __entry = site.data.category_registry[__slug] %}
                                        {% endif %}
                                        {% capture _quotes_title %}
                                            {% if page.source-url %}
                                                <span class="p-name"><a href="{{page.source-url}}" target="_new">{{ page.source }}</a>&NonBreakingSpace;<a href="{{page.source-url}}" target="_new"><i class="fa fa-external-link" aria-hidden="true"></i></a></span>
                                            {% elsif page.source %}
                                                <span class="p-name">{{ page.source }}</span>
                                            {% else %}
                                                <span class="p-name">Source: Unknown</span>
                                            {% endif %}
                                        {% endcapture %}
                                        {% if __entry %}
                                            {% include utility/category-palette-apply.html entry=__entry title_html=_quotes_title title_tag='div' title_class='quotes-page-title post-title' wrapper_class='quotes-hero' %}
                                        {% else %}
                                            {{ _quotes_title }}
                                        {% endif %}

                    <h3><u>{{ page.author }}</u></h3> 

                    {% if page.image %}
                    <figure>
                    <img class="img-responsive img-thumbnail" src="{{ site.url }}{{ page.image }}" alt="{{page.image-alt}} by {{page.image_credits}}">
                      <figcaption>
                        {% if page.image-credits-URL or page.image-credits-title %}
                            <a target="_new" href="{{page.image-credits-URL}}">"{{page.image-credits-title}}" by {{page.image-credits-artist}}</a>
                        {% elsif page.image-credits %}
                          {{page.image-alt}} by {{page.image_credits}}
                        {% else %}
                            Unknown
                        {% endif %}
                      </figcaption>
                    </figure>
                    <hr>
                    {% endif %}


                    <!-- Post Content -->
                    <span class="e-content">
   
                        <!-- Post Content -->

                        <div id="toc"></div>    
                        <span class="e-content" id="main_content">{{ page.content }}</span>
    

                    <hr>
                </main>

                <!--Next and Previous Articles -->
                {% include content/next-and-previous.html %}

                <hr>

            </div>

            <!-- Blog Sidebar Widgets Column -->
            <div class="col-md-4">

                <!-- Blog Categories Well -->
                <div class="well">
                    <div class="post-categories">
                        {% assign categories = page.categories %}
                        {% for category in categories %}
                            {% capture __slug %}{% include utility/map-category-to-registry.html key=category %}{% endcapture %}
                            {% assign __slug = __slug | strip %}
                            {% if __slug == '' %}{% assign __slug = category | slugify %}{% endif %}
                                                        {% assign __entry = site.data.category_registry[__slug] %}
                                                        {% if __entry and __entry.category_home_page %}
                                                            {% assign __href = __entry.category_home_page %}
                                                        {% else %}
                                                            {% assign __href = '/category/' | append: __slug | append: '/' %}
                                                        {% endif %}
                            <h4>Latest in <a href="{{ site.url }}{{ __href }}">{{category}}</a></h4>
                                <div class="row">
                                <div class="col-lg-12">
                                    <ul class="list-unstyled">{%- for post in site.categories[category] limit:5 -%}
                                        <li><a href="{{ site.url }}{{ post.url }}">{{ post.title }}</a></li>
                                    {%- endfor -%}</ul>
                                </div>
                            </div>
                        {% endfor %}
                    </div>
                </div>
            </div>

        </div>

    </div>
    <!-- /.container -->



  <!-- Footer -->
  {% include layout/footer.html %}

  <!-- Bootstrap core JavaScript -->
  {% include assets/js-bottom-of-body.html %}

  </body>

</html>
