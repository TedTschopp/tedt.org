<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prompt Details Page - Mobile Responsive Tests</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        .test-section { margin: 20px 0; padding: 15px; border: 1px solid #ccc; }
        .pass { color: green; }
        .fail { color: red; }
        .warning { color: orange; }
        .results { margin-top: 10px; }
        .viewport-simulator { border: 2px solid #333; margin: 10px 0; overflow: hidden; }
        .mobile { width: 375px; height: 667px; }
        .tablet { width: 768px; height: 1024px; }
        .desktop { width: 1200px; height: 800px; }
    </style>
</head>
<body>
    <h1>Prompt Details Page - Mobile Responsive Tests</h1>
    
    <div class="test-section">
        <h2>Viewport Breakpoint Tests</h2>
        <div id="viewport-results" class="results"></div>
    </div>
    
    <div class="test-section">
        <h2>Touch Target Size Tests</h2>
        <div id="touch-results" class="results"></div>
    </div>
    
    <div class="test-section">
        <h2>Content Layout Tests</h2>
        <div id="layout-results" class="results"></div>
    </div>
    
    <div class="test-section">
        <h2>Button Stacking Tests</h2>
        <div id="button-results" class="results"></div>
    </div>

    <script>
        // Mobile responsive testing utility functions
        function testViewportBreakpoints() {
            const results = document.getElementById('viewport-results');
            const tests = [];
            const viewportWidth = window.innerWidth;
            
            // Test Bootstrap breakpoints
            tests.push({
                name: 'Current viewport width',
                pass: true,
                message: `Current width: ${viewportWidth}px`
            });
            
            // Test for responsive meta tag
            const metaViewport = document.querySelector('meta[name="viewport"]');
            tests.push({
                name: 'Viewport meta tag present',
                pass: !!metaViewport,
                message: metaViewport ? `Content: ${metaViewport.content}` : 'Missing viewport meta tag'
            });
            
            // Test media query support
            const supportsMediaQueries = window.matchMedia('(min-width: 768px)').matches;
            tests.push({
                name: 'Media queries supported',
                pass: typeof window.matchMedia === 'function',
                message: 'Media query support detected'
            });
            
            displayResults(results, tests);
        }
        
        function testTouchTargetSizes() {
            const results = document.getElementById('touch-results');
            const tests = [];
            
            // Test interactive elements for minimum touch target size (44x44px)
            const touchTargets = document.querySelectorAll('button, a, input[type="checkbox"], input[type="radio"]');
            let adequateTargets = 0;
            
            touchTargets.forEach(target => {
                const rect = target.getBoundingClientRect();
                const styles = window.getComputedStyle(target);
                const padding = parseFloat(styles.paddingTop) + parseFloat(styles.paddingBottom);
                const minSize = 44;
                
                if (rect.height >= minSize || rect.width >= minSize || padding >= 12) {
                    adequateTargets++;
                }
            });
            
            tests.push({
                name: 'Touch targets meet minimum size requirements',
                pass: adequateTargets === touchTargets.length,
                message: `${adequateTargets}/${touchTargets.length} targets meet 44px minimum`
            });
            
            // Test button spacing
            const buttons = document.querySelectorAll('button');
            let adequateSpacing = true;
            for (let i = 0; i < buttons.length - 1; i++) {
                const rect1 = buttons[i].getBoundingClientRect();
                const rect2 = buttons[i + 1].getBoundingClientRect();
                const distance = Math.abs(rect2.left - rect1.right);
                if (distance < 8) {
                    adequateSpacing = false;
                    break;
                }
            }
            
            tests.push({
                name: 'Buttons have adequate spacing',
                pass: adequateSpacing,
                message: adequateSpacing ? 'All buttons properly spaced' : 'Some buttons too close together'
            });
            
            displayResults(results, tests);
        }
        
        function testContentLayout() {
            const results = document.getElementById('layout-results');
            const tests = [];
            
            // Test for horizontal scrolling
            const hasHorizontalScroll = document.body.scrollWidth > window.innerWidth;
            tests.push({
                name: 'No horizontal scrolling required',
                pass: !hasHorizontalScroll,
                message: hasHorizontalScroll ? 'Horizontal scroll detected' : 'Content fits viewport width'
            });
            
            // Test for proper text sizing
            const textElements = document.querySelectorAll('p, span, div, h1, h2, h3, h4, h5, h6');
            let adequateTextSize = true;
            textElements.forEach(el => {
                const fontSize = parseFloat(window.getComputedStyle(el).fontSize);
                if (fontSize < 14) {
                    adequateTextSize = false;
                }
            });
            
            tests.push({
                name: 'Text size adequate for mobile',
                pass: adequateTextSize,
                message: adequateTextSize ? 'All text ≥14px' : 'Some text too small'
            });
            
            // Test for responsive images
            const images = document.querySelectorAll('img');
            let responsiveImages = 0;
            images.forEach(img => {
                const styles = window.getComputedStyle(img);
                if (styles.maxWidth === '100%' || img.hasAttribute('srcset')) {
                    responsiveImages++;
                }
            });
            
            tests.push({
                name: 'Images are responsive',
                pass: responsiveImages === images.length,
                message: `${responsiveImages}/${images.length} images are responsive`
            });
            
            displayResults(results, tests);
        }
        
        function testButtonStacking() {
            const results = document.getElementById('button-results');
            const tests = [];
            
            // Test AI provider buttons container
            const buttonContainer = document.querySelector('.ai-provider-buttons');
            if (buttonContainer) {
                const containerStyles = window.getComputedStyle(buttonContainer);
                tests.push({
                    name: 'AI provider buttons use flexbox',
                    pass: containerStyles.display === 'flex',
                    message: `Display: ${containerStyles.display}`
                });
                
                tests.push({
                    name: 'Button container allows wrapping',
                    pass: containerStyles.flexWrap === 'wrap',
                    message: `Flex-wrap: ${containerStyles.flexWrap}`
                });
                
                // Test button overflow on mobile
                const buttons = buttonContainer.querySelectorAll('button');
                const containerRect = buttonContainer.getBoundingClientRect();
                let buttonsOverflow = false;
                
                buttons.forEach(button => {
                    const buttonRect = button.getBoundingClientRect();
                    if (buttonRect.right > containerRect.right) {
                        buttonsOverflow = true;
                    }
                });
                
                tests.push({
                    name: 'Buttons do not overflow container',
                    pass: !buttonsOverflow,
                    message: buttonsOverflow ? 'Some buttons overflow' : 'All buttons fit in container'
                });
            } else {
                tests.push({
                    name: 'AI provider buttons container found',
                    pass: false,
                    message: 'Button container not found'
                });
            }
            
            displayResults(results, tests);
        }
        
        function simulateViewport(width, height) {
            // This would be used with testing frameworks like Puppeteer
            // For demo purposes, we'll just log the simulation
            console.log(`Simulating viewport: ${width}x${height}`);
            
            // In a real test, you would:
            // - Set viewport size
            // - Run responsive tests
            // - Capture screenshots
            // - Compare layouts
        }
        
        function displayResults(container, tests) {
            container.innerHTML = '';
            tests.forEach(test => {
                const div = document.createElement('div');
                div.className = test.pass ? 'pass' : 'fail';
                div.innerHTML = `
                    <strong>${test.pass ? '✓' : '✗'} ${test.name}</strong><br>
                    ${test.message}
                `;
                container.appendChild(div);
            });
        }
        
        // Run all tests when page loads
        document.addEventListener('DOMContentLoaded', function() {
            testViewportBreakpoints();
            testTouchTargetSizes();
            testContentLayout();
            testButtonStacking();
        });
        
        // Re-run tests on window resize
        window.addEventListener('resize', function() {
            setTimeout(() => {
                testViewportBreakpoints();
                testContentLayout();
                testButtonStacking();
            }, 250);
        });
        
        // Export functions for use in other testing frameworks
        if (typeof module !== 'undefined' && module.exports) {
            module.exports = {
                testViewportBreakpoints,
                testTouchTargetSizes,
                testContentLayout,
                testButtonStacking,
                simulateViewport
            };
        }
    </script>
</body>
</html>
