<script>
  const toggleTheme = () => {
    const htmlTag = document.documentElement;
    const currentTheme = htmlTag.getAttribute('data-bs-theme') || 'dark';
    const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
    htmlTag.setAttribute('data-bs-theme', newTheme);
    document.cookie = `theme=${newTheme}; path=/; max-age=31536000`;
    const btn = document.getElementById('btnToggleTheme');
    if(btn){
      const pressed = newTheme === 'dark';
      btn.setAttribute('aria-pressed', pressed ? 'true':'false');
    }
  }
</script>


<script>
  (function() {
    function getCookie(name) {
      const value = '; ' + document.cookie;
      const parts = value.split('; ' + name + '=');
      if (parts.length === 2) return parts.pop().split(';').shift();
    }
    function applySavedTheme() {
      const saved = getCookie('theme');
      if(saved){
        document.documentElement.setAttribute('data-bs-theme', saved);
      }
      // Sync pressed state
      const btn = document.getElementById('btnToggleTheme');
      if(btn){
        const mode = document.documentElement.getAttribute('data-bs-theme') || 'dark';
        btn.setAttribute('aria-pressed', mode === 'dark' ? 'true':'false');
      }
    }
    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', applySavedTheme);
    } else {
      applySavedTheme();
    }
  })();
</script>
