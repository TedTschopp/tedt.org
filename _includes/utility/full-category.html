{%- comment -%}
  Category styling and display text resolved via _data/category_styles.yml
  Usage: {% include utility/full-category.html category=category-to-render render-number=true %}
  Expects external vars: category, category-to-render (legacy), category[0], category[1] from iteration
{%- endcomment -%}

{% assign Text-to-Output = "" %}
{% assign raw_category = include.category %}
{% assign style_map = site.data.category_styles[raw_category] %}
{% if style_map %}
  {% assign class-to-add = style_map.class %}
  {% if style_map.text %}{% assign Text-to-Output = style_map.text %}{% endif %}
{% else %}
  {% assign class-to-add = raw_category | slugify %}
{% endif %}

{% if Text-to-Output == "" %}
  {% assign Text-to-Output = category-to-render | default: raw_category %}
{% endif %}

<a style="text-decoration: none; font-size: x-large;" class="{{class-to-add}}" 
href="{{site.url}}/category/{{category[0]}}">{% include utility/category-emoji.html category=category-to-render %} {{ Text-to-Output }}{% if include.render-number == true %} ({{ category[1].size }}){%endif %}</a>