{%- comment -%}
  Unified category link w/ count using category_registry.yml
  Usage (example - pseudo): include utility/full-category.html category=pair[0] category_obj=pair[1] render_number=true
  (Deliberately shown without Liquid tag braces to avoid parser issues.)
  Params:
    category (string) - raw name, variant, or canonical slug
    category_obj (array) - optional category posts array (for size)
    render_number (boolean) - set true to show count
  Note: legacy parameter name 'render-number' still supported.
{%- endcomment -%}
{% assign registry = site.data.category_registry %}
{% assign raw = include.category | to_s %}
{% assign canonical = nil %}
{% if registry[raw] %}
  {% assign canonical = raw %}
{% else %}
  {% assign lower = raw | downcase %}
  {% for pair in registry %}
    {% assign slug = pair[0] %}
    {% assign data = pair[1] %}
    {% if canonical %}{% break %}{% endif %}
    {% if data.raw_names %}
      {% for variant in data.raw_names %}
        {% if variant and variant | downcase == lower %}
          {% assign canonical = slug %}
          {% break %}
        {% endif %}
      {% endfor %}
    {% endif %}
  {% endfor %}
{% endif %}
{% if canonical == nil %}{% assign canonical = raw | slugify %}{% endif %}
{% assign entry = registry[canonical] %}
{% assign display = entry.label | default: entry.title | default: raw %}
{% assign klass = entry.class | default: canonical %}
{%- assign render_count = false -%}
{%- if include.render_number -%}
  {%- assign render_count = include.render_number -%}
{%- elsif include['render-number'] -%}
  {%- assign render_count = include['render-number'] -%}
{%- endif -%}
<a style="text-decoration: none; font-size: x-large;" class="{{klass}}" href="{{site.url}}/category/{{canonical}}">{% include utility/category-emoji.html category=display %} {{ display }}{%- if render_count and include.category_obj -%} ({{ include.category_obj.size }}){%- endif -%}</a>