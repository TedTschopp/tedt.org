<figure class="hex-multi-scale my-3 position-relative">
  <figcaption class="small text-muted mb-1">Multi-scale hex overlay (36 / 6 / 1 mile reference)</figcaption>
  <div class="position-relative" style="width:100%;aspect-ratio:4/3;">
    <canvas id="hex-multi-scale" style="width:100%;height:100%;display:block;border:1px solid var(--bs-border-color,#ccc);background:var(--bs-body-bg,#ffffff);"></canvas>
    <div class="hex-controls" style="position:absolute;top:.5rem;right:.5rem;display:flex;flex-direction:column;gap:.25rem;">
      <button type="button" class="btn btn-sm btn-outline-secondary border" id="hex-zoom-in" aria-label="Zoom in" title="Zoom in (+)">+</button>
      <button type="button" class="btn btn-sm btn-outline-secondary border" id="hex-zoom-out" aria-label="Zoom out" title="Zoom out (-)">−</button>
      <button type="button" class="btn btn-sm btn-outline-secondary border" id="hex-reset" aria-label="Reset view" title="Reset view">⟳</button>
    </div>
  <div id="hex-legend" class="hex-legend bg-body-tertiary rounded shadow-sm p-2 small" style="position:absolute;left:.5rem;top:.5rem;max-width:55%;line-height:1.1;pointer-events:none;">
      <!-- Legend populated by hex-multi-scale.js -->
    </div>
  </div>
  <figcaption class="visually-hidden">Drag to pan. Use buttons, mouse wheel, pinch (touch) to zoom, or reset.</figcaption>
</figure>

<style>
/* Theme-aware styles for hex visualization */
.hex-multi-scale {
    width: 100%;
    max-width: 640px;
}

.hex-multi-scale canvas {
    background: var(--bs-body-bg, #ffffff) !important;
}

[data-bs-theme="dark"] .hex-multi-scale canvas {
    background: var(--bs-gray-900, #212529) !important;
    border-color: var(--bs-border-color, #495057) !important;
}

.hex-controls .btn {
    background: var(--bs-body-bg, #ffffff);
    color: var(--bs-body-color, #212529);
    border-color: var(--bs-border-color, #dee2e6);
}

.hex-controls .btn:hover {
    background: var(--bs-gray-100, #f8f9fa);
    border-color: var(--bs-gray-400, #ced4da);
}

[data-bs-theme="dark"] .hex-controls .btn {
    background: var(--bs-gray-800, #343a40);
    color: var(--bs-gray-100, #f8f9fa);
    border-color: var(--bs-gray-600, #6c757d);
}

[data-bs-theme="dark"] .hex-controls .btn:hover {
    background: var(--bs-gray-700, #495057);
    border-color: var(--bs-gray-500, #adb5bd);
}

.hex-legend {
    background: rgba(var(--bs-body-bg-rgb, 255, 255, 255), 0.95) !important;
    color: var(--bs-body-color, #212529);
    border: 1px solid var(--bs-border-color, #dee2e6);
}

[data-bs-theme="dark"] .hex-legend {
    background: rgba(var(--bs-gray-900-rgb, 33, 37, 41), 0.95) !important;
    color: var(--bs-gray-100, #f8f9fa);
    border-color: var(--bs-gray-700, #495057);
}
</style>

<script src="/js/hex.js"></script>
<script src="/js/hex-multi-scale.js"></script>
