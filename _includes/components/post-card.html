<!-- Post card component with image support -->
<!-- Usage: {% include components/post-card.html post=post %} -->

{% if post.image %}
  {% assign image_alt = post.image-alt | default: post.image-description | default: post.title %}
  {% assign image_credits_title = post.image-credits-title | default: post.image-title | default: "Unknown" %}
  {% assign image_credits = post.image-credits-artist | default: post.image-artist | default: "Unknown" %}
  {% assign image_credits_artist_URL = post.image-credits-artist-URL | default: post.image-artist-URL %}
  {% assign image_URL = post.image %}
  <div class="card rounded-0 px-0"> <!-- style="max-width: 540px;" -->
    <div class="row g-0">
      <div class="col-md-4">
        <img src="{{ image_URL }}" alt="{{ image_alt }} by {{ image_credits }}" class="img-fluid rounded-start" style="width: 100%; height: 100%; object-fit: cover;" loading="lazy">
      </div>
      <div class="col-md-8">
        <div class="card-body">
          <h5 class="card-title three-line-clamp">
            <a href="{{ post.url | absolute_url }}">{{ post.title }}</a>
          </h5>
          <p class="card-text text-truncate-3">
            {%- assign __summary = post.teaser | default: post.description | default: post.excerpt -%}
            {%- if __summary == nil or __summary == '' -%}
              {%- assign __summary = post.content | strip_html | truncate: 180 -%}
            {%- endif -%}
            {{ __summary | strip_html }}
          </p>
          <p class="card-text">
            Posted on <small class="text-muted text-body-secondary">
              <time datetime="{{ post.date | date_to_xmlschema }}" itemprop="datePublished">{{ post.date | date: "%B %d, %Y" }}</time>
            </small>
          </p>
        </div>
      </div>
    </div>
  </div>
{% else %}
  <div class="card rounded-0 px-0"> <!-- style="max-width: 540px;" -->
    <div class="row g-0">
      <div class="col-md-12">
        <div class="card-body">
          <h5 class="card-title three-line-clamp">
            <a href="{{ post.url | absolute_url }}">{{ post.title }}</a>
          </h5>
          <p class="card-text text-truncate-3">
            {%- assign __summary = post.teaser | default: post.description | default: post.excerpt -%}
            {%- if __summary == nil or __summary == '' -%}
              {%- assign __summary = post.content | strip_html | truncate: 180 -%}
            {%- endif -%}
            {{ __summary | strip_html }}
          </p>
          <p class="card-text">
            Posted on <small class="text-muted text-body-secondary">
              <time datetime="{{ post.date | date_to_xmlschema }}" itemprop="datePublished">{{ post.date | date: "%B %d, %Y" }}</time>
            </small>
          </p>
        </div>
      </div>
    </div>
  </div>
{% endif %}