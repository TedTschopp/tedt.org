/* Navbar height & vertical alignment overrides
   Reason: Previous attempt adding these rules inside _sass/_navbar.scss did not surface in compiled
   bootstrap-build.css (likely due to upstream Bootstrap partial precedence or caching). Importing
   this file LAST guarantees the cascade wins without editing core Bootstrap partials.
   Accessibility: Maintains 44px minimum interactive targets while giving the bar a consistent 70px
   visual block for branding and rhythm.
*/

/* Canary rule to confirm this partial is compiled into bootstrap-build.css. Search for NAVBAR_CANARY. */
body.NAVBAR_CANARY_TEST::before { content: "NAVBAR_CANARY"; display: none; }

/* Responsive toggler visibility & stacking context ----------------------------------
  Issue: Toggler appearing when it shouldn't (on large viewports) and collapsed menu
  content rendering beneath hero/article imagery. Fix by:
  1. For viewports >= lg: hide the .navbar-toggler (Bootstrap's .navbar-expand-lg should do this, but
    explicit rule added because custom overrides earlier may have altered default display logic).
  2. Ensure the collapsing container gains a higher stacking context and isn't occluded by positioned
    article media. Use position:relative + z-index and an elevated z-index on the open .show state.
  3. Provide a subtle background & box-shadow on mobile expanded menu to separate from underlying imagery.
*/

@media (min-width: 992px) { /* lg breakpoint */
  .navbar.navbar-expand-lg .navbar-toggler { display: none !important; }
}

.navbar.sticky-top { z-index: 1030; } /* above typical content; slightly below modals (Bootstrap uses 1030 for fixed navs) */

.navbar .collapse.navbar-collapse { position: relative; z-index: 1025; }
.navbar .collapse.navbar-collapse.show {
  z-index: 1040; /* raise above hero images */
  background: rgba(0,0,0,0.92); /* dark backdrop for readability */
  -webkit-backdrop-filter: blur(4px); /* Safari */
  backdrop-filter: blur(4px); /* soften underlying content */
  box-shadow: 0 4px 12px rgba(0,0,0,0.4);
  border-radius: .5rem;
  padding: .75rem 1rem; /* breathing room inside expanded panel */
}

/* Ensure dropdown menus within expanded mobile panel appear above the panel itself */
.navbar .dropdown-menu { z-index: 1050; }

.navbar.sticky-top {
  height: 70px;
  min-height: 70px;
  display: flex;
  align-items: center;
}

.navbar.sticky-top > .container-fluid { height: 100%; display:flex; align-items:center; }

/* Brand & controls vertically centered inside the 70px bar */
.navbar.sticky-top .navbar-brand,
.navbar.sticky-top .navbar-toggler,
.navbar.sticky-top .navbar-nav > li > .nav-link,
.navbar.sticky-top .navbar-nav > li > button.nav-link,
.navbar.sticky-top .navbar-nav > li > button.menu-item {
  display: flex;
  align-items: center;
  height: 70px; /* match bar */
  padding-top: 0;
  padding-bottom: 0;
}

/* Brand mark sizing (kept below full bar height for optical breathing room) */
.navbar.sticky-top .navbar-brand img {
  height: 64px;
  width: auto;
  display: block;
}

/* Prevent accidental shrink if utility classes applied */
.navbar.sticky-top .navbar-nav > li { display:flex; align-items:center; }

/* --- Beta / Experimental Feature Indicators ---------------------------------------
   Purpose: Provide a lightweight, accessible visual marker for navigation items that
   represent features still in early access / beta / experimental phases (e.g. Prompts,
   Presentations). Keeps semantics separate from text labels so future removal is a
   one-line edit.
   Accessibility:
     * Icons are decorative; actual status is conveyed via visually hidden text span
       (screen readers announce "Prompts (Early Access)" while sighted users see icon).
     * Maintains 44px target sizing; badge kept small to avoid shifting link baseline.
   Performance: Pure CSS; no JS required. Reuses existing font-awesome load.
   Extension Pattern: Add a modifier class .nav-beta--experimental | --caution | --dev
   if future differentiated states are needed (palette tokens below can be extended).
*/
.nav-beta-icon { /* container for the status icon */
  display:inline-flex;
  align-items:center;
  justify-content:center;
  margin-left:.35rem; /* subtle separation from text label */
  font-size:.85rem; /* slightly smaller than base nav text */
  line-height:1;
  opacity:.75; /* deemphasize vs primary label */
  transition:opacity .15s ease, transform .15s ease;
}

/* Bake icon via pseudo-element so HTML stays minimal (no <i> required). Decorative; screen reader
   text provided separately in .visually-hidden-beta span after the link label. */
.nav-beta-icon::before {
  content:''; /* default empty; variants override */
  display:inline-block;
  font-weight:600;
  filter:drop-shadow(0 0 1px rgba(0,0,0,.2));
  font-size:1em; /* inherit sizing from container */
}

.navbar-nav .nav-link:hover .nav-beta-icon,
.navbar-nav button.nav-link:hover .nav-beta-icon {
  opacity:1;
  transform:translateY(-1px);
}

/* State variants (future-proofing) */
.nav-beta--experimental { color:#b327ff; }
.nav-beta--experimental::before { content:'üß™'; }
.nav-beta--early { color:var(--bs-orange, #ff8c42); }
.nav-beta--early::before { content:'üß≠'; }
.nav-beta--caution { color:#bb2d3b; }
.nav-beta--caution::before { content:'‚ö†Ô∏è'; }
.nav-beta--inprogress { color:#0d6efd; }
.nav-beta--inprogress::before { content:'üë∑'; }
.nav-beta--dev { color:#198754; }
.nav-beta--dev::before { content:'‚öôÔ∏è'; }

/* Fallback custom property for orange if not defined */
:root { --bs-orange: #ff8c42; }

/* Visually hidden helper (reuse if not globally present) */
.sr-only, .visually-hidden-beta { position:absolute !important; width:1px !important; height:1px !important; padding:0 !important; margin:-1px !important; overflow:hidden !important; clip:rect(0,0,0,0) !important; border:0 !important; }
