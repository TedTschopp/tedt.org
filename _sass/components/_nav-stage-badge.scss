// _nav-stage-badge.scss
// Purpose: Visual styling for lifecycle stage symbols (α, β, γ) used in navigation.
// Accessibility: Color choices meet WCAG AA contrast against dark navbar (#212529) and light backgrounds.
// Light/Dark mode: Uses CSS variables if present; falls back to explicit colors.
// Usage: <span class="nav-stage-badge nav-stage--alpha">( <span class="nav-stage-symbol">α</span> )</span>
// Only the symbol inherits the color; parentheses maintain current text color for subtlety.

/* New unified class names aligning with generic include: .stage-badge / .stage-symbol */
.nav-stage-badge, .stage-badge {
  display: inline-block;
  line-height: 1;
  font-size: 0.85em;
  font-weight: 600;
  margin-left: 0.35rem;
  letter-spacing: 0.5px;
}
.nav-stage-badge .nav-stage-symbol, .stage-badge .stage-symbol { font-family: inherit; }

/* Micro viewport adjustments: shrink symbol slightly to avoid wrapping crowding */
@media (max-width: 380px) {
  .nav-stage-badge, .stage-badge { font-size: 0.75em; margin-left: 0.3rem; }
}
@media (max-width: 320px) {
  .nav-stage-badge, .stage-badge { font-size: 0.7em; margin-left: 0.25rem; }
}

// Stage-specific colors
.nav-stage--alpha .nav-stage-symbol, .stage--alpha .stage-symbol {
  color: var(--stage-alpha-color, #ff6b6b); // vibrant red/pink for experimental
}
.nav-stage--beta .nav-stage-symbol, .stage--beta .stage-symbol {
  color: var(--stage-beta-color, #f7b500); // amber/gold for in-progress stabilization
}
.nav-stage--gamma .nav-stage-symbol, .stage--gamma .stage-symbol {
  color: var(--stage-gamma-color, #2ecc71); // green for ready/steady
}

// High-contrast mode (prefers-reduced-motion used as a lightweight media query pivot example; can adjust)
@media (forced-colors: active) {
  .nav-stage--alpha .nav-stage-symbol,
  .nav-stage--beta .nav-stage-symbol,
  .nav-stage--gamma .nav-stage-symbol,
  .stage--alpha .stage-symbol,
  .stage--beta .stage-symbol,
  .stage--gamma .stage-symbol {
    color: ButtonText;
  }
}

/* Reinforced visually hidden rule: Some pages reported the extended lifecycle text (screen-reader only)
   rendering visibly despite Bootstrap's global .visually-hidden utility. To guarantee concealment even if
   the utility class fails to compile or is overridden upstream, hide any immediate sibling span with
   class .visually-hidden following a stage badge root. This keeps semantic separation (badge decorative;
   description announced by assistive tech) while ensuring sighted users only see the symbol.
   Scope-limited selector avoids altering other visually hidden elements globally. */
.stage-badge + .visually-hidden,
.nav-stage-badge + .visually-hidden {
  position: absolute !important;
  width: 1px !important;
  height: 1px !important;
  padding: 0 !important;
  margin: -1px !important;
  overflow: hidden !important;
  clip: rect(0,0,0,0) !important;
  white-space: nowrap !important;
  border: 0 !important;
}
